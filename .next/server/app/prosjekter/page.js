(()=>{var e={};e.id=22,e.ids=[22],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7058:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Eidsheim\\\\Kopi av driftig 10.04.25\\\\.ssh\\\\driftig\\\\src\\\\app\\\\prosjekter\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\prosjekter\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},14807:(e,t,r)=>{Promise.resolve().then(r.bind(r,7058))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19535:(e,t,r)=>{Promise.resolve().then(r.bind(r,93580))},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},54453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),o=r.n(i),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["prosjekter",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7058)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\prosjekter\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\prosjekter\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/prosjekter/page",pathname:"/prosjekter",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},93580:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(60687),a=r(43210),i=r(93996),o=r(37590);let n=e=>{let t={id:"",name:e.name||"",description:e.description||"",client:e.client||"",status:e.status||"active",start_date:e.startDate||new Date().toISOString().split("T")[0],priority:e.priority||"medium",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return e.endDate&&""!==e.endDate&&(t.end_date=e.endDate),void 0!==e.budget&&null!==e.budget&&(t.budget=e.budget),console.log("Converted project for Supabase:",t),t},l=e=>({id:e.id,name:e.name,description:e.description,client:e.client,status:e.status,startDate:e.start_date,endDate:e.end_date,budget:e.budget?Number(e.budget):void 0,priority:e.priority});function d(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[g,m]=(0,a.useState)({name:"",description:"",client:"",status:"active",startDate:new Date().toISOString().split("T")[0],endDate:"",budget:void 0,priority:"medium"}),h=async r=>{if(r.preventDefault(),g.name&&g.client)try{let r=n(g),s=await (0,i.gA)(r);s&&(t([l(s),...e]),o.oR.success("Prosjekt opprettet")),m({name:"",description:"",client:"",status:"active",startDate:new Date().toISOString().split("T")[0],endDate:"",budget:void 0,priority:"medium"}),d(!1)}catch(e){console.error("Error creating project:",e),o.oR.error("Kunne ikke opprette prosjekt")}},b=async r=>{if(window.confirm("Er du sikker p\xe5 at du vil slette dette prosjektet?"))try{await (0,i.xx)(r),t(e.filter(e=>e.id!==r)),o.oR.success("Prosjekt slettet")}catch(e){console.error("Error deleting project:",e),o.oR.error("Kunne ikke slette prosjekt")}},f=async(r,s)=>{try{if(!e.find(e=>e.id===r))return;await (0,i.vr)(r,{status:s}),t(e.map(e=>e.id===r?{...e,status:s}:e)),o.oR.success("Status oppdatert")}catch(e){console.error("Error updating project status:",e),o.oR.error("Kunne ikke oppdatere status")}},j=e=>{x(e),u(!0)},y=async r=>{if(r.preventDefault(),p)try{let r=n(p);await (0,i.vr)(p.id,r),t(e.map(e=>e.id===p.id?p:e)),o.oR.success("Prosjekt oppdatert"),u(!1),x(null)}catch(e){console.error("Error updating project:",e),o.oR.error("Kunne ikke oppdatere prosjekt")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Prosjekter"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"Administrer dine prosjekter"})]}),(0,s.jsxs)("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full flex items-center gap-2 shadow-sm transition-all duration-200",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{children:"Nytt prosjekt"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:e.name}),(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"active"===e.status?"bg-blue-900/50 text-blue-400":"completed"===e.status?"bg-green-900/50 text-green-400":"bg-gray-900/50 text-gray-400"}`,children:e.status})]}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:e.description}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Klient: ",(0,s.jsx)("span",{className:"text-white",children:e.client})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Startdato: ",(0,s.jsx)("span",{className:"text-white",children:new Date(e.startDate).toLocaleDateString("nb-NO")})]}),e.endDate&&(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Sluttdato: ",(0,s.jsx)("span",{className:"text-white",children:new Date(e.endDate).toLocaleDateString("nb-NO")})]}),e.budget&&(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Budsjett: ",(0,s.jsxs)("span",{className:"text-white",children:[e.budget.toLocaleString("nb-NO")," kr"]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Prioritet: ",(0,s.jsx)("span",{className:`${"high"===e.priority?"text-red-400":"medium"===e.priority?"text-yellow-400":"text-green-400"}`,children:e.priority})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 rounded-lg text-sm bg-blue-900/50 text-blue-400 hover:bg-blue-900/70",children:"Endre"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"active"),className:`px-3 py-1 rounded-lg text-sm ${"active"===e.status?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Aktiv"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"completed"),className:`px-3 py-1 rounded-lg text-sm ${"completed"===e.status?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Fullf\xf8rt"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"archived"),className:`px-3 py-1 rounded-lg text-sm ${"archived"===e.status?"bg-gray-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:"Arkivert"}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-1 rounded-lg text-sm bg-red-900/50 text-red-400 hover:bg-red-900/70",children:"Slett"})]})]},e.id))}),c&&p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Endre prosjekt"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prosjektnavn"}),(0,s.jsx)("input",{type:"text",value:p.name,onChange:e=>x({...p,name:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Beskrivelse"}),(0,s.jsx)("textarea",{value:p.description,onChange:e=>x({...p,description:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Klient"}),(0,s.jsx)("input",{type:"text",value:p.client,onChange:e=>x({...p,client:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:p.status,onChange:e=>x({...p,status:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"active",children:"Aktiv"}),(0,s.jsx)("option",{value:"completed",children:"Fullf\xf8rt"}),(0,s.jsx)("option",{value:"archived",children:"Arkivert"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prioritet"}),(0,s.jsxs)("select",{value:p.priority,onChange:e=>x({...p,priority:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Lav"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"H\xf8y"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Startdato"}),(0,s.jsx)("input",{type:"date",value:p.startDate,onChange:e=>x({...p,startDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sluttdato"}),(0,s.jsx)("input",{type:"date",value:p.endDate||"",onChange:e=>x({...p,endDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Budsjett"}),(0,s.jsx)("input",{type:"number",value:p.budget||"",onChange:e=>x({...p,budget:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{u(!1),x(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Avbryt"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Lagre endringer"})]})]})]})}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Nytt prosjekt"}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prosjektnavn"}),(0,s.jsx)("input",{type:"text",value:g.name,onChange:e=>m({...g,name:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Beskrivelse"}),(0,s.jsx)("textarea",{value:g.description,onChange:e=>m({...g,description:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Klient"}),(0,s.jsx)("input",{type:"text",value:g.client,onChange:e=>m({...g,client:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Startdato"}),(0,s.jsx)("input",{type:"date",value:g.startDate,onChange:e=>m({...g,startDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sluttdato"}),(0,s.jsx)("input",{type:"date",value:g.endDate||"",onChange:e=>m({...g,endDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Budsjett"}),(0,s.jsx)("input",{type:"number",value:g.budget||"",onChange:e=>m({...g,budget:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prioritet"}),(0,s.jsxs)("select",{value:g.priority,onChange:e=>m({...g,priority:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Lav"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"H\xf8y"})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg mt-6",children:"Lagre"})]})]})})]})})}},93996:(e,t,r)=>{"use strict";r.d(t,{JQ:()=>a,Ub:()=>c,Z4:()=>d,gA:()=>i,ui:()=>l,vr:()=>o,xx:()=>n});var s=r(16391);async function a(){let{data:e,error:t}=await s.ND.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching projects:",t),t;return e||[]}async function i(e){console.log("Creating project with data:",e);try{console.log("Supabase client:",s.ND);let{data:t,error:r}=await s.ND.from("projects").select("id").limit(1);if(r)throw console.error("Error checking projects table:",r),Error(`Table check failed: ${r.message}`);console.log("Table check result:",t);let{data:a,error:i}=await s.ND.from("projects").insert([e]).select();if(i)throw console.error("Error creating project:",i),Error(`Insert failed: ${i.message}`);return console.log("Project created successfully:",a),a?.[0]}catch(e){throw console.error("Exception in createProject:",e),e}}async function o(e,t){console.log("Updating project with id:",e,"and data:",t);try{let{data:r,error:a}=await s.ND.from("projects").update(t).eq("id",e).select();if(a)throw console.error(`Error updating project with id ${e}:`,a),a;return console.log("Project updated successfully:",r),r?.[0]}catch(t){throw console.error(`Exception in updateProject for id ${e}:`,t),t}}async function n(e){let{error:t}=await s.ND.from("projects").delete().eq("id",e);if(t)throw console.error(`Error deleting project with id ${e}:`,t),t;return!0}async function l(){let{data:e,error:t}=await s.ND.from("scheduled_projects").select(`
      *,
      projects:project_id (*)
    `).order("scheduled_date",{ascending:!0});if(t)throw console.error("Error fetching scheduled projects:",t),t;return e||[]}async function d(e,t){let{data:r,error:a}=await s.ND.from("scheduled_projects").insert([{project_id:e,scheduled_date:t}]).select();if(a)throw console.error(`Error scheduling project ${e} for date ${t}:`,a),a;return r?.[0]}async function c(e,t){let{error:r}=await s.ND.from("scheduled_projects").delete().eq("project_id",e).eq("scheduled_date",t);if(r)throw console.error(`Error unscheduling project ${e} for date ${t}:`,r),r;return!0}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,183,658,25,958],()=>r(54453));module.exports=s})();
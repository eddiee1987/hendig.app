(()=>{var e={};e.id=928,e.ids=[928],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16391:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});var s=r(94025);let i="https://jntsodzdafscwksizfov.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpudHNvZHpkYWZzY3drc2l6Zm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NTU1NDAsImV4cCI6MjA1OTEzMTU0MH0.bHJS17KYKP4n2Abs0rp2oO0pFBGW3GorNhsJFyDljR8";console.log("Supabase URL:",i),console.log("Supabase Anon Key:",n?"Set":"Not set"),i&&n||console.error("Supabase credentials are not set correctly in environment variables");let a=(0,s.UU)(i,n)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29408:(e,t,r)=>{Promise.resolve().then(r.bind(r,55052))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},42560:(e,t,r)=>{Promise.resolve().then(r.bind(r,61938))},55052:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(60687),i=r(43210),n=r(16189),a=r(16391),l=r(99009),o=r(44493),d=r(89667),c=r(4780);let u=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));function p(){let e=(0,n.useRouter)(),[t,r]=(0,i.useState)([]),[c,p]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null),[g,h]=(0,i.useState)(null),[b,v]=(0,i.useState)(""),[f,j]=(0,i.useState)(""),[y,k]=(0,i.useState)(""),[N,w]=(0,i.useState)(""),[S,C]=(0,i.useState)("planlagt"),[q,P]=(0,i.useState)(""),[_,I]=(0,i.useState)(""),[E,U]=(0,i.useState)(""),[K,R]=(0,i.useState)(""),[V,A]=(0,i.useState)(!1),[z,G]=(0,i.useState)([]),[J,M]=(0,i.useState)([]),T=async t=>{if(t.preventDefault(),!b||!N||!q)return void h("Vennligst fyll ut alle p\xe5krevde felt");try{h("Lagrer inspeksjon...");let{error:t}=await a.N.from("inspections").insert([{customer_id:b,customer_name:f,customer_address:y,inspection_date:q,inspection_type:N,status:S,roof_condition:_,notes:E,inspector:K}]);if(t){console.error("Error saving inspection:",t),t.message.includes('relation "inspections" does not exist')||t.message.includes("does not exist")||"42P01"===t.code?h(`Inspeksjonstabellen eksisterer ikke enn\xe5. Vennligst kj\xf8r migrasjonen f\xf8rst.`):h(`Kunne ikke lagre inspeksjon: ${t.message}`);return}if("utf\xf8rt"===S&&("v\xe5rvedlikehold"===N||"h\xf8stvedlikehold"===N)){let e="v\xe5rvedlikehold"===N?"var":"host",{error:t}=await a.N.from("abonnementer").update({[e]:"Ja"}).eq("id",b);t&&console.error("Error updating customer maintenance status:",t)}V&&console.log("SMS would be sent:",{to:"customer phone",message:`Vi kommer for \xe5 utf\xf8re ${N} p\xe5 taket ditt den ${q}`}),h("Inspeksjon lagret!"),setTimeout(()=>{e.push("/inspeksjoner")},1500)}catch(e){console.error("Unexpected error:",e),h("En uventet feil oppstod")}};return c?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-8 ml-64",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-400",children:"Laster kunder..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-8 ml-64",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-6",children:"Ny inspeksjon"}),m&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-800 text-red-400 px-4 py-3 rounded-xl mb-6",children:m}),g&&!g.includes("Kunne ikke")&&!g.includes("Vennligst")&&(0,s.jsx)("div",{className:"bg-green-900/20 border border-green-800 text-green-400 px-4 py-3 rounded-xl mb-6",children:g}),g&&(g.includes("Kunne ikke")||g.includes("Vennligst"))&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-800 text-red-400 px-4 py-3 rounded-xl mb-6",children:g}),(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)(o.Zp,{className:"p-6 bg-gray-800 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Kundeinformasjon"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Velg kunde"}),(0,s.jsxs)("select",{className:"w-full p-2 border border-gray-600 rounded bg-gray-700 text-white",value:b,onChange:e=>{let r=e.target.value;if(v(r),r){let e=t.find(e=>e.id===r);e&&(j(e.etternavn),k(e.adresse))}else j(""),k("")},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Velg kunde..."}),t.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.etternavn," - ",e.adresse,", ",e.kommune]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Type inspeksjon"}),(0,s.jsxs)("select",{className:"w-full p-2 border border-gray-600 rounded bg-gray-700 text-white",value:N,onChange:e=>w(e.target.value),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Velg type..."}),(0,s.jsx)("option",{value:"v\xe5rvedlikehold",children:"V\xe5rvedlikehold"}),(0,s.jsx)("option",{value:"h\xf8stvedlikehold",children:"H\xf8stvedlikehold"}),(0,s.jsx)("option",{value:"rehabilitering",children:"Rehabilitering"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),(0,s.jsxs)("select",{className:"w-full p-2 border border-gray-600 rounded bg-gray-700 text-white",value:S,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"planlagt",children:"Planlagt"}),(0,s.jsx)("option",{value:"utf\xf8rt",children:"Utf\xf8rt"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Dato"}),(0,s.jsx)(d.p,{type:"date",value:q,onChange:e=>P(e.target.value),required:!0,className:"bg-gray-700 border-gray-600 text-white"})]})]})]}),(0,s.jsxs)(o.Zp,{className:"p-6 bg-gray-800 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Inspeksjonsdetaljer"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Taktilstand"}),(0,s.jsxs)("select",{className:"w-full p-2 border border-gray-600 rounded bg-gray-700 text-white",value:_,onChange:e=>I(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Velg tilstand..."}),(0,s.jsx)("option",{value:"god",children:"God"}),(0,s.jsx)("option",{value:"normal",children:"Normal"}),(0,s.jsx)("option",{value:"d\xe5rlig",children:"D\xe5rlig"}),(0,s.jsx)("option",{value:"kritisk",children:"Kritisk"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Inspekt\xf8r"}),(0,s.jsx)(d.p,{type:"text",value:K,onChange:e=>R(e.target.value),placeholder:"Navn p\xe5 inspekt\xf8r",className:"bg-gray-700 border-gray-600 text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Last opp bilder"}),(0,s.jsx)(d.p,{type:"file",accept:"image/*",multiple:!0,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files);G(e=>[...e,...t]);let r=t.map(e=>URL.createObjectURL(e));M(e=>[...e,...r])}},className:"bg-gray-700 border-gray-600 text-white"}),J.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:J.map((e,t)=>(0,s.jsx)("img",{src:e,alt:`Bilde ${t+1}`,className:"w-full h-24 object-cover rounded"},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notater"}),(0,s.jsx)(u,{value:E,onChange:e=>U(e.target.value),placeholder:"Beskriv takets tilstand og eventuelle problemer...",rows:4,className:"bg-gray-700 border-gray-600 text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"sendSms",checked:V,onChange:e=>A(e.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600"}),(0,s.jsxs)("label",{htmlFor:"sendSms",className:"text-gray-300",children:["Send SMS til kunde om ","planlagt"===S?"planlagt":"utf\xf8rt"," vedlikehold"]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>e.push("/inspeksjoner"),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Avbryt"}),(0,s.jsx)(l.$,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"planlagt"===S?"Planlegg inspeksjon":"Registrer utf\xf8rt inspeksjon"})]})]})]})})}u.displayName="Textarea"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61938:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Eidsheim\\\\Kopi av driftig 10.04.25\\\\.ssh\\\\driftig\\\\src\\\\app\\\\inspeksjoner\\\\ny\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\ny\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69653:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),n=r(88170),a=r.n(n),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["inspeksjoner",{children:["ny",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61938)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\ny\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\ny\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/inspeksjoner/ny/page",pathname:"/inspeksjoner/ny",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,115,658,25,600],()=>r(69653));module.exports=s})();
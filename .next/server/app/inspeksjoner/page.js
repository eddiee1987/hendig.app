(()=>{var e={};e.id=524,e.ids=[524],e.modules={3213:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=t(65239),n=t(48088),i=t(88170),a=t.n(i),l=t(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d={children:["",{children:["inspeksjoner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,11656)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/inspeksjoner/page",pathname:"/inspeksjoner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11656:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Eidsheim\\\\Kopi av driftig 10.04.25\\\\.ssh\\\\driftig\\\\src\\\\app\\\\inspeksjoner\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Eidsheim\\Kopi av driftig 10.04.25\\.ssh\\driftig\\src\\app\\inspeksjoner\\page.tsx","default")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},49881:(e,s,t)=>{Promise.resolve().then(t.bind(t,57850))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57850:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(60687),n=t(43210),i=t(16189),a=t(16391),l=t(85814),o=t.n(l);function d(){(0,i.useRouter)();let[e,s]=(0,n.useState)([]),[t,l]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null),[x,p]=(0,n.useState)({planned:0,completed:0,cancelled:0}),[u,h]=(0,n.useState)(""),[m,g]=(0,n.useState)("all"),[j,f]=(0,n.useState)("all");async function b(){try{l(!0);let{data:e,error:t}=await a.ND.from("inspections").select(`
          *,
          abonnementer:customer_id (etternavn)
        `).order("inspection_date",{ascending:!1});if(t){console.error("Error fetching inspections:",t),t.message.includes('relation "inspections" does not exist')||t.message.includes("does not exist")||"42P01"===t.code?(console.log("Inspections table not found or not accessible yet"),s([]),p({planned:0,completed:0,cancelled:0})):c("Kunne ikke hente inspeksjoner");return}if(s(e||[]),e){let s=e.filter(e=>"planlagt"===e.status).length,t=e.filter(e=>"utf\xf8rt"===e.status).length;p({planned:s,completed:t,cancelled:0})}}catch(e){console.error("Unexpected error:",e),c("En uventet feil oppstod")}finally{l(!1)}}let v=e.filter(e=>{let s=(e.abonnementer?.etternavn||"").toLowerCase().includes(u.toLowerCase())||e.customer_address.toLowerCase().includes(u.toLowerCase())||e.inspector&&e.inspector.toLowerCase().includes(u.toLowerCase()),t="all"===m||e.inspection_type===m,r="all"===j||e.status===j;return s&&t&&r}),y=async e=>{if(confirm("Er du sikker p\xe5 at du vil slette denne inspeksjonen?"))try{let{error:s}=await a.ND.from("inspections").delete().eq("id",e);if(s)return void console.error("Error deleting inspection:",s);b()}catch(e){console.error("Unexpected error:",e)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 p-8 ml-64",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-12",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Inspeksjoner"}),(0,r.jsx)("p",{className:"text-gray-400 mt-2",children:"Administrer inspeksjoner og rapporter"})]}),(0,r.jsx)(o(),{href:"/inspeksjoner/ny",children:(0,r.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full flex items-center gap-2 shadow-sm transition-all duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Ny inspeksjon"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400",children:"Planlagte inspeksjoner"}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-900/50 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:t?(0,r.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):x.planned})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400",children:"Utf\xf8rte inspeksjoner"}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-900/50 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:t?(0,r.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):x.completed})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-gray-400",children:"Totalt antall inspeksjoner"}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-900/50 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:t?(0,r.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):e.length})]})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-2xl p-6 mb-8 border border-gray-700",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"S\xf8k etter kunde eller inspekt\xf8r...",className:"flex-1 min-w-[200px] rounded-xl border-gray-700 focus:ring-blue-500 focus:border-blue-500 bg-gray-700 text-gray-300",value:u,onChange:e=>h(e.target.value)}),(0,r.jsxs)("select",{className:"rounded-xl border-gray-700 focus:ring-blue-500 focus:border-blue-500 bg-gray-700 text-gray-300",value:m,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"Alle typer"}),(0,r.jsx)("option",{value:"v\xe5rvedlikehold",children:"V\xe5rvedlikehold"}),(0,r.jsx)("option",{value:"h\xf8stvedlikehold",children:"H\xf8stvedlikehold"}),(0,r.jsx)("option",{value:"rehabilitering",children:"Rehabilitering"})]}),(0,r.jsxs)("select",{className:"rounded-xl border-gray-700 focus:ring-blue-500 focus:border-blue-500 bg-gray-700 text-gray-300",value:j,onChange:e=>f(e.target.value),children:[(0,r.jsx)("option",{value:"all",children:"Alle status"}),(0,r.jsx)("option",{value:"planlagt",children:"Planlagt"}),(0,r.jsx)("option",{value:"utf\xf8rt",children:"Utf\xf8rt"})]})]})}),t?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-400",children:"Laster inspeksjoner..."})]}):d?(0,r.jsx)("div",{className:"bg-red-900/20 text-red-400 p-6 rounded-xl text-center",children:d}):0===v.length?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-12 text-center",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Ingen inspeksjoner funnet"}),(0,r.jsx)(o(),{href:"/inspeksjoner/ny",children:(0,r.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Opprett ny inspeksjon"})})]}):(0,r.jsx)("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Kunde"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Dato"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-400",children:"Inspekt\xf8r"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-400",children:"Handling"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-700",children:v.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-700/50",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"text-white",children:e.abonnementer?.etternavn||e.customer_name||"Ukjent kunde"}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:e.customer_address}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[e.before_images&&e.before_images.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"F\xf8r"}),(0,r.jsx)("div",{className:"flex gap-1",children:e.before_images.slice(0,2).map((e,s)=>(0,r.jsx)("img",{src:e,alt:"F\xf8r-bilde",className:"w-10 h-10 object-cover rounded"},s))})]}),e.after_images&&e.after_images.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-400",children:"Etter"}),(0,r.jsx)("div",{className:"flex gap-1",children:e.after_images.slice(0,2).map((e,s)=>(0,r.jsx)("img",{src:e,alt:"Etter-bilde",className:"w-10 h-10 object-cover rounded"},s))})]})]})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"text-white",children:new Date(e.inspection_date).toLocaleDateString("nb-NO")})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"v\xe5rvedlikehold"===e.inspection_type?"bg-green-900/50 text-green-400":"h\xf8stvedlikehold"===e.inspection_type?"bg-yellow-900/50 text-yellow-400":"bg-blue-900/50 text-blue-400"}`,children:e.inspection_type})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"planlagt"===e.status?"bg-yellow-900/50 text-yellow-400":"bg-green-900/50 text-green-400"}`,children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"text-white",children:e.inspector||"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"text-white flex justify-end",children:[(0,r.jsx)(o(),{href:`/inspeksjoner/${e.id}`,className:"text-blue-400 hover:text-blue-500 mr-4",children:(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.478 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("button",{className:"text-red-400 hover:text-red-500",onClick:()=>y(e.id),children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e.id))})]})})})]})})}},62905:(e,s,t)=>{Promise.resolve().then(t.bind(t,11656))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,183,658,25,958],()=>t(3213));module.exports=r})();
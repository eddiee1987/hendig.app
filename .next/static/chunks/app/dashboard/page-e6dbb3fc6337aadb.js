(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1846:(e,t,r)=>{Promise.resolve().then(r.bind(r,2913))},2099:(e,t,r)=>{"use strict";r.d(t,{ND:()=>l,uT:()=>i});var s=r(851);let a="https://jntsodzdafscwksizfov.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpudHNvZHpkYWZzY3drc2l6Zm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NTU1NDAsImV4cCI6MjA1OTEzMTU0MH0.bHJS17KYKP4n2Abs0rp2oO0pFBGW3GorNhsJFyDljR8";console.log("Supabase URL:",a),console.log("Supabase Anon Key:",n?"Set":"Not set"),a&&n||console.error("Supabase credentials are not set correctly in environment variables");let l=(0,s.UU)(a,n);async function i(e){try{let{data:t,error:r}=await l.from("time_entries").select("*").eq("employee_id",e).order("date",{ascending:!1});if(r)return console.error("Error fetching time entries:",r),[];return t}catch(e){return console.error("Unexpected error fetching time entries:",e),[]}}},2913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var s=r(5155),a=r(2115),n=r(6874),l=r.n(n),i=r(2099);async function o(e){let t="7755843cdee3787c0c51687458acae46";if(!t)throw Error("OpenWeather API key not configured");let r=await fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&units=metric&appid=").concat(t)),s=await r.json();if(!r.ok)throw Error(s.message||"Failed to fetch weather data");return s.list.reduce((e,t)=>{let r=t.dt_txt.split(" ")[0];return e.find(e=>e.dt_txt.includes(r))||e.push(t),e},[]).map(e=>({date:e.dt_txt,temp:e.main.temp,description:e.weather[0].description,icon:e.weather[0].icon}))}function c(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[l,i]=(0,a.useState)("");return((0,a.useEffect)(()=>{(async()=>{try{let e=await o("Nesbyen,NO");t(e.slice(0,7))}catch(e){i(e instanceof Error?e.message:"Failed to load weather")}finally{n(!1)}})()},[]),r)?(0,s.jsx)("div",{children:"Loading weather..."}):l?(0,s.jsx)("div",{className:"text-red-500",children:l}):(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow p-4 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2 text-white",children:"V\xe6rvarsel for Nesbyen"}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-4 xl:gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-300",children:new Date(e.date).toLocaleDateString("no-NO",{weekday:"short"})}),(0,s.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(e.icon,".png"),alt:e.description,className:"mx-auto"}),(0,s.jsxs)("div",{className:"font-medium text-white",children:[Math.round(e.temp),"\xb0C"]})]},e.date))})]})}var d=r(7794),m=r(1183),h=r(4423),u=r(5703),x=r(7239),g=r(9447);function p(e,t){var r;let s,a,n=()=>(0,x.w)(null==t?void 0:t.in,NaN),l=null!=(r=null==t?void 0:t.additionalDigits)?r:2,i=function(e){let t,r={},s=e.split(j.dateTimeDelimiter);if(s.length>2)return r;if(/:/.test(s[0])?t=s[0]:(r.date=s[0],t=s[1],j.timeZoneDelimiter.test(r.date)&&(r.date=e.split(j.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=j.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(i.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};let a=s[1]?parseInt(s[1]):null,n=s[2]?parseInt(s[2]):null;return{year:null===n?a:100*n,restDateString:e.slice((s[1]||s[2]).length)}}(i.date,l);s=function(e,t){var r,s,a,n,l,i,o,c;if(null===t)return new Date(NaN);let d=e.match(f);if(!d)return new Date(NaN);let m=!!d[4],h=v(d[1]),u=v(d[2])-1,x=v(d[3]),g=v(d[4]),p=v(d[5])-1;if(m){return(r=0,s=g,a=p,s>=1&&s<=53&&a>=0&&a<=6)?function(e,t,r){let s=new Date(0);s.setUTCFullYear(e,0,4);let a=s.getUTCDay()||7;return s.setUTCDate(s.getUTCDate()+((t-1)*7+r+1-a)),s}(t,g,p):new Date(NaN)}{let e=new Date(0);return(n=t,l=u,i=x,l>=0&&l<=11&&i>=1&&i<=(w[l]||(k(n)?29:28))&&(o=t,(c=h)>=1&&c<=(k(o)?366:365)))?(e.setUTCFullYear(t,u,Math.max(h,x)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return n();let o=+s,c=0;if(i.time&&isNaN(c=function(e){var t,r,s;let a=e.match(N);if(!a)return NaN;let n=y(a[1]),l=y(a[2]),i=y(a[3]);return(t=n,r=l,s=i,24===t?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&t>=0&&t<25)?n*u.s0+l*u.Cg+1e3*i:NaN}(i.time)))return n();if(i.timezone){if(isNaN(a=function(e){var t,r;if("Z"===e)return 0;let s=e.match(b);if(!s)return 0;let a="+"===s[1]?-1:1,n=parseInt(s[2]),l=s[3]&&parseInt(s[3])||0;return(t=0,(r=l)>=0&&r<=59)?a*(n*u.s0+l*u.Cg):NaN}(i.timezone)))return n()}else{let e=new Date(o+c),r=(0,g.a)(0,null==t?void 0:t.in);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}return(0,g.a)(o+c+a,null==t?void 0:t.in)}let j={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},f=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,N=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,b=/^([+-])(\d{2})(?::?(\d{2}))?$/;function v(e){return e?parseInt(e):1}function y(e){return e&&parseFloat(e.replace(",","."))||0}let w=[31,null,31,30,31,30,31,31,30,31,30,31];function k(e){return e%400==0||e%4==0&&e%100!=0}var D=r(5936);function S(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[l,i]=(0,a.useState)("");return((0,a.useEffect)(()=>{(async()=>{try{let e=(await (0,d.ui)()).filter(e=>(function(e,t,r){let[s,a]=(0,m.x)(void 0,e,t);return+(0,h.k)(s,void 0)==+(0,h.k)(a,r)})(p(e.scheduled_date),new Date));t(e)}catch(e){i(e instanceof Error?e.message:"Failed to load maintenance schedule")}finally{n(!1)}})()},[]),r)?(0,s.jsx)("div",{children:"Loading maintenance schedule..."}):l?(0,s.jsx)("div",{className:"text-red-500",children:l}):(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow p-4 border border-gray-700 mt-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2 text-white",children:"Planlagt vedlikehold denne uken"}),0===e.length?(0,s.jsx)("div",{className:"text-gray-300",children:"Du har ingen planlagte jobber denne uken"}):(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-white",children:(null==(t=e.projects)?void 0:t.name)||"Ukjent prosjekt"}),(0,s.jsx)("div",{className:"text-gray-300 text-sm",children:(0,D.GP)(p(e.scheduled_date),"EEEE dd.MM")})]},e.id)})})]})}function C(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[o,d]=(0,a.useState)({totalCustomers:0,pendingSpringMaintenance:0,pendingFallMaintenance:0,activeProjects:0}),[m,h]=(0,a.useState)(!0),[u,x]=(0,a.useState)(""),[g,p]=(0,a.useState)([{id:"1",task:"Bestille jord til Torvullvegen",completed:!1,createdAt:new Date().toISOString()},{id:"2",task:"Legge membran Nattenvegen 332",completed:!1,createdAt:new Date().toISOString()},{id:"3",task:"Ringe Kaugerud transport",completed:!1,createdAt:new Date().toISOString()}]),[j,f]=(0,a.useState)(""),[N,b]=(0,a.useState)(!1);async function v(){try{h(!0);let{data:e,error:r}=await i.ND.from("abonnementer").select("*");if(r)return void console.error("Error fetching customers:",r);if(!e)return;let s=e.length,a=e.filter(e=>"Ja"!==e.var).length,l=e.filter(e=>"Ja"!==e.host).length,{data:o,error:c}=await i.ND.from("projects").select("*").eq("status","active");c&&console.error("Error fetching projects:",c),d({totalCustomers:s,pendingSpringMaintenance:a,pendingFallMaintenance:l,activeProjects:(null==o?void 0:o.length)||0});let m=[...e].sort((e,t)=>{let r=e.fornyelsesdato?new Date(e.fornyelsesdato).getTime():0,s=t.fornyelsesdato?new Date(t.fornyelsesdato).getTime():0;return r-s}).slice(0,5);n(m);let u=[...e].sort((e,t)=>{let r=e.fornyelsesdato?new Date(e.fornyelsesdato).getTime():0;return(t.fornyelsesdato?new Date(t.fornyelsesdato).getTime():0)-r}).slice(0,5);t(u)}catch(e){console.error("Error in fetchDashboardData:",e)}finally{h(!1)}}return(0,a.useEffect)(()=>{v(),x((()=>{let e=new Date().getHours();return e>=5&&e<12?"God morgen":e>=12&&e<17?"God ettermiddag":e>=17&&e<22?"God kveld":"God natt"})())},[]),(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-4 md:p-8 ml-0 md:ml-64",children:(0,s.jsxs)("div",{className:"max-w-full md:max-w-7xl xl:w-[140%] xl:-ml-[20%] mx-auto",children:[(0,s.jsx)("p",{className:"text-2xl text-gray-400",children:new Date().toLocaleDateString("no-NO",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),(0,s.jsxs)("h1",{className:"text-4xl font-bold text-white",children:[u,", ","Edgar"]}),(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"Oversikt over aktiviteter og status"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-gray-400",children:"Aktive prosjekter"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-900/50 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:m?(0,s.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):o.activeProjects})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-gray-400",children:"Registrerte abonnementer"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-900/50 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:m?(0,s.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):o.totalCustomers})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-gray-400",children:"Gjenst\xe5r v\xe5rvedlikehold"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-900/50 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:m?(0,s.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):o.pendingSpringMaintenance})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-gray-400",children:"Gjenst\xe5r h\xf8stvedlikehold"}),(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-900/50 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white mt-2",children:m?(0,s.jsx)("span",{className:"inline-block w-8 h-6 bg-gray-700 animate-pulse rounded"}):o.pendingFallMaintenance})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Todo-liste"}),(0,s.jsx)("button",{className:"text-sm text-blue-400 hover:text-blue-300",onClick:()=>b(!N),children:"Legg til"})]}),N&&(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),j.trim()&&(p([...g,{id:Date.now().toString(),task:j,completed:!1,createdAt:new Date().toISOString()}]),f(""),b(!1))},className:"mb-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ny oppgave",autoFocus:!0}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Lagre"})]})}),(0,s.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-700/50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{className:"w-5 h-5 rounded border ".concat(e.completed?"bg-blue-500 border-blue-500":"border-gray-500"),onClick:()=>p(g.map(t=>t.id===e.id?{...t,completed:!t.completed}:t)),children:e.completed&&(0,s.jsx)("svg",{className:"w-3 h-3 mx-auto text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-white ".concat(e.completed?"line-through text-gray-500":""),children:e.task})]}),(0,s.jsx)("button",{className:"text-gray-400 hover:text-red-400",onClick:()=>p(g.filter(t=>t.id!==e.id)),children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{}),(0,s.jsx)(S,{})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-4 md:p-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Nylige aktiviteter"}),(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-700 last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white",children:"Ny timef\xf8ring registrert"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Prosjekt: Kundeportal"})]})]}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"2 timer siden"})]},e))})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Kommende fornyelser"}),(0,s.jsx)(l(),{href:"/abonnement",className:"text-sm text-blue-400 hover:text-blue-300",children:"Se alle"})]}),m?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-12 bg-gray-700 animate-pulse rounded"},e))}):r.length>0?(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-700 last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white",children:e.etternavn}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:e.adresse})]})]}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:e.fornyelsesdato?new Date(e.fornyelsesdato).toLocaleDateString("no-NO"):"Ikke satt"})]},e.id))}):(0,s.jsx)("p",{className:"text-gray-400",children:"Ingen kommende fornyelser"})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Vedlikehold status"}),(0,s.jsx)(l(),{href:"/abonnement",className:"text-sm text-blue-400 hover:text-blue-300",children:"Se detaljer"})]}),m?(0,s.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-16 bg-gray-700 animate-pulse rounded mb-4"},e))}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"V\xe5rvedlikehold"}),(0,s.jsxs)("span",{className:"text-white",children:[o.pendingSpringMaintenance," gjenst\xe5r"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:"".concat(o.totalCustomers>0?(o.totalCustomers-o.pendingSpringMaintenance)/o.totalCustomers*100:0,"%")}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"H\xf8stvedlikehold"}),(0,s.jsxs)("span",{className:"text-white",children:[o.pendingFallMaintenance," gjenst\xe5r"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-yellow-600 h-2.5 rounded-full",style:{width:"".concat(o.totalCustomers>0?(o.totalCustomers-o.pendingFallMaintenance)/o.totalCustomers*100:0,"%")}})})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-gray-700",children:(0,s.jsx)(l(),{href:"/abonnement/historikk",className:"text-sm text-blue-400 hover:text-blue-300",children:"Se tidligere vedlikehold"})})]})]})]})]})})}},7794:(e,t,r)=>{"use strict";r.d(t,{JQ:()=>a,Ub:()=>d,Z4:()=>c,gA:()=>n,ui:()=>o,vr:()=>l,xx:()=>i});var s=r(2099);async function a(){let{data:e,error:t}=await s.ND.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching projects:",t),t;return e||[]}async function n(e){console.log("Creating project with data:",e);try{console.log("Supabase client:",s.ND);let{data:t,error:r}=await s.ND.from("projects").select("id").limit(1);if(r)throw console.error("Error checking projects table:",r),Error("Table check failed: ".concat(r.message));console.log("Table check result:",t);let{data:a,error:n}=await s.ND.from("projects").insert([e]).select();if(n)throw console.error("Error creating project:",n),Error("Insert failed: ".concat(n.message));return console.log("Project created successfully:",a),null==a?void 0:a[0]}catch(e){throw console.error("Exception in createProject:",e),e}}async function l(e,t){console.log("Updating project with id:",e,"and data:",t);try{let{data:r,error:a}=await s.ND.from("projects").update(t).eq("id",e).select();if(a)throw console.error("Error updating project with id ".concat(e,":"),a),a;return console.log("Project updated successfully:",r),null==r?void 0:r[0]}catch(t){throw console.error("Exception in updateProject for id ".concat(e,":"),t),t}}async function i(e){let{error:t}=await s.ND.from("projects").delete().eq("id",e);if(t)throw console.error("Error deleting project with id ".concat(e,":"),t),t;return!0}async function o(){let{data:e,error:t}=await s.ND.from("scheduled_projects").select("\n      *,\n      projects:project_id (*)\n    ").order("scheduled_date",{ascending:!0});if(t)throw console.error("Error fetching scheduled projects:",t),t;return e||[]}async function c(e,t){let{data:r,error:a}=await s.ND.from("scheduled_projects").insert([{project_id:e,scheduled_date:t}]).select();if(a)throw console.error("Error scheduling project ".concat(e," for date ").concat(t,":"),a),a;return null==r?void 0:r[0]}async function d(e,t){let{error:r}=await s.ND.from("scheduled_projects").delete().eq("project_id",e).eq("scheduled_date",t);if(r)throw console.error("Error unscheduling project ".concat(e," for date ").concat(t,":"),r),r;return!0}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,874,936,441,684,358],()=>t(1846)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{105:(e,t,r)=>{Promise.resolve().then(r.bind(r,888))},888:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),l=r(7794),n=r(3568);let o=e=>{let t={name:e.name||"",description:e.description||"",client:e.client||"",status:e.status||"active",start_date:e.startDate||new Date().toISOString().split("T")[0],priority:e.priority||"medium"};return e.endDate&&""!==e.endDate&&(t.end_date=e.endDate),void 0!==e.budget&&null!==e.budget&&(t.budget=e.budget),console.log("Converted project for Supabase:",t),t},i=e=>({id:e.id,name:e.name,description:e.description,client:e.client,status:e.status,startDate:e.start_date,endDate:e.end_date,budget:e.budget?Number(e.budget):void 0,priority:e.priority});function c(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[b,h]=(0,a.useState)({name:"",description:"",client:"",status:"active",startDate:new Date().toISOString().split("T")[0],endDate:"",budget:void 0,priority:"medium"});(0,a.useEffect)(()=>{(async()=>{try{c(!0);let e=await (0,l.JQ)();t(e.map(i))}catch(e){console.error("Error fetching projects:",e),n.oR.error("Kunne ikke hente prosjekter")}finally{c(!1)}})()},[]);let y=async r=>{if(r.preventDefault(),b.name&&b.client)try{let r=o(b),s=await (0,l.gA)(r);s&&(t([i(s),...e]),n.oR.success("Prosjekt opprettet")),h({name:"",description:"",client:"",status:"active",startDate:new Date().toISOString().split("T")[0],endDate:"",budget:void 0,priority:"medium"}),u(!1)}catch(e){console.error("Error creating project:",e),n.oR.error("Kunne ikke opprette prosjekt")}},j=async r=>{if(window.confirm("Er du sikker p\xe5 at du vil slette dette prosjektet?"))try{await (0,l.xx)(r),t(e.filter(e=>e.id!==r)),n.oR.success("Prosjekt slettet")}catch(e){console.error("Error deleting project:",e),n.oR.error("Kunne ikke slette prosjekt")}},f=async(r,s)=>{try{if(!e.find(e=>e.id===r))return;await (0,l.vr)(r,{status:s}),t(e.map(e=>e.id===r?{...e,status:s}:e)),n.oR.success("Status oppdatert")}catch(e){console.error("Error updating project status:",e),n.oR.error("Kunne ikke oppdatere status")}},v=e=>{p(e),x(!0)},w=async r=>{if(r.preventDefault(),m)try{let r=o(m);await (0,l.vr)(m.id,r),t(e.map(e=>e.id===m.id?m:e)),n.oR.success("Prosjekt oppdatert"),x(!1),p(null)}catch(e){console.error("Error updating project:",e),n.oR.error("Kunne ikke oppdatere prosjekt")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Prosjekter"}),(0,s.jsx)("p",{className:"text-gray-400 mt-2",children:"Administrer dine prosjekter"})]}),(0,s.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full flex items-center gap-2 shadow-sm transition-all duration-200",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{children:"Nytt prosjekt"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:e.name}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-blue-900/50 text-blue-400":"completed"===e.status?"bg-green-900/50 text-green-400":"bg-gray-900/50 text-gray-400"),children:e.status})]}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:e.description}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Klient: ",(0,s.jsx)("span",{className:"text-white",children:e.client})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Startdato: ",(0,s.jsx)("span",{className:"text-white",children:new Date(e.startDate).toLocaleDateString("nb-NO")})]}),e.endDate&&(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Sluttdato: ",(0,s.jsx)("span",{className:"text-white",children:new Date(e.endDate).toLocaleDateString("nb-NO")})]}),e.budget&&(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Budsjett: ",(0,s.jsxs)("span",{className:"text-white",children:[e.budget.toLocaleString("nb-NO")," kr"]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Prioritet: ",(0,s.jsx)("span",{className:"".concat("high"===e.priority?"text-red-400":"medium"===e.priority?"text-yellow-400":"text-green-400"),children:e.priority})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded-lg text-sm bg-blue-900/50 text-blue-400 hover:bg-blue-900/70",children:"Endre"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"active"),className:"px-3 py-1 rounded-lg text-sm ".concat("active"===e.status?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:"Aktiv"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"completed"),className:"px-3 py-1 rounded-lg text-sm ".concat("completed"===e.status?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:"Fullf\xf8rt"}),(0,s.jsx)("button",{onClick:()=>f(e.id,"archived"),className:"px-3 py-1 rounded-lg text-sm ".concat("archived"===e.status?"bg-gray-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:"Arkivert"}),(0,s.jsx)("button",{onClick:()=>j(e.id),className:"px-3 py-1 rounded-lg text-sm bg-red-900/50 text-red-400 hover:bg-red-900/70",children:"Slett"})]})]},e.id))}),g&&m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Endre prosjekt"}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prosjektnavn"}),(0,s.jsx)("input",{type:"text",value:m.name,onChange:e=>p({...m,name:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Beskrivelse"}),(0,s.jsx)("textarea",{value:m.description,onChange:e=>p({...m,description:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Klient"}),(0,s.jsx)("input",{type:"text",value:m.client,onChange:e=>p({...m,client:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:m.status,onChange:e=>p({...m,status:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"active",children:"Aktiv"}),(0,s.jsx)("option",{value:"completed",children:"Fullf\xf8rt"}),(0,s.jsx)("option",{value:"archived",children:"Arkivert"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prioritet"}),(0,s.jsxs)("select",{value:m.priority,onChange:e=>p({...m,priority:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Lav"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"H\xf8y"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Startdato"}),(0,s.jsx)("input",{type:"date",value:m.startDate,onChange:e=>p({...m,startDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sluttdato"}),(0,s.jsx)("input",{type:"date",value:m.endDate||"",onChange:e=>p({...m,endDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Budsjett"}),(0,s.jsx)("input",{type:"number",value:m.budget||"",onChange:e=>p({...m,budget:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{x(!1),p(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Avbryt"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Lagre endringer"})]})]})]})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Nytt prosjekt"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prosjektnavn"}),(0,s.jsx)("input",{type:"text",value:b.name,onChange:e=>h({...b,name:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Beskrivelse"}),(0,s.jsx)("textarea",{value:b.description,onChange:e=>h({...b,description:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Klient"}),(0,s.jsx)("input",{type:"text",value:b.client,onChange:e=>h({...b,client:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Startdato"}),(0,s.jsx)("input",{type:"date",value:b.startDate,onChange:e=>h({...b,startDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sluttdato"}),(0,s.jsx)("input",{type:"date",value:b.endDate||"",onChange:e=>h({...b,endDate:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Budsjett"}),(0,s.jsx)("input",{type:"number",value:b.budget||"",onChange:e=>h({...b,budget:e.target.value?Number(e.target.value):void 0}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Prioritet"}),(0,s.jsxs)("select",{value:b.priority,onChange:e=>h({...b,priority:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Lav"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"H\xf8y"})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg mt-6",children:"Lagre"})]})]})})]})})}},2099:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var s=r(851);let a="https://jntsodzdafscwksizfov.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpudHNvZHpkYWZzY3drc2l6Zm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NTU1NDAsImV4cCI6MjA1OTEzMTU0MH0.bHJS17KYKP4n2Abs0rp2oO0pFBGW3GorNhsJFyDljR8";console.log("Supabase URL:",a),console.log("Supabase Anon Key:",l?"Set":"Not set"),a&&l||console.error("Supabase credentials are not set correctly in environment variables");let n=(0,s.UU)(a,l)},7794:(e,t,r)=>{"use strict";r.d(t,{JQ:()=>a,Ub:()=>d,Z4:()=>c,gA:()=>l,ui:()=>i,vr:()=>n,xx:()=>o});var s=r(2099);async function a(){let{data:e,error:t}=await s.N.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching projects:",t),t;return e||[]}async function l(e){console.log("Creating project with data:",e);try{console.log("Supabase client:",s.N);let{data:t,error:r}=await s.N.from("projects").select("id").limit(1);if(r)throw console.error("Error checking projects table:",r),Error("Table check failed: ".concat(r.message));console.log("Table check result:",t);let{data:a,error:l}=await s.N.from("projects").insert([e]).select();if(l)throw console.error("Error creating project:",l),Error("Insert failed: ".concat(l.message));return console.log("Project created successfully:",a),null==a?void 0:a[0]}catch(e){throw console.error("Exception in createProject:",e),e}}async function n(e,t){console.log("Updating project with id:",e,"and data:",t);try{let{data:r,error:a}=await s.N.from("projects").update(t).eq("id",e).select();if(a)throw console.error("Error updating project with id ".concat(e,":"),a),a;return console.log("Project updated successfully:",r),null==r?void 0:r[0]}catch(t){throw console.error("Exception in updateProject for id ".concat(e,":"),t),t}}async function o(e){let{error:t}=await s.N.from("projects").delete().eq("id",e);if(t)throw console.error("Error deleting project with id ".concat(e,":"),t),t;return!0}async function i(){let{data:e,error:t}=await s.N.from("scheduled_projects").select("\n      *,\n      projects:project_id (*)\n    ").order("scheduled_date",{ascending:!0});if(t)throw console.error("Error fetching scheduled projects:",t),t;return e||[]}async function c(e,t){let{data:r,error:a}=await s.N.from("scheduled_projects").insert([{project_id:e,scheduled_date:t}]).select();if(a)throw console.error("Error scheduling project ".concat(e," for date ").concat(t,":"),a),a;return null==r?void 0:r[0]}async function d(e,t){let{error:r}=await s.N.from("scheduled_projects").delete().eq("project_id",e).eq("scheduled_date",t);if(r)throw console.error("Error unscheduling project ".concat(e," for date ").concat(t,":"),r),r;return!0}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,568,441,684,358],()=>t(105)),_N_E=e.O()}]);
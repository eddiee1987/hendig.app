{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Eidsheim/Kopi%20av%20driftig%2010.04.25/.ssh/driftig/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\r\n\r\nconsole.log('Supabase URL:', supabaseUrl)\r\nconsole.log('Supabase Anon Key:', supabaseAnonKey ? 'Set' : 'Not set')\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  console.error('Supabase credentials are not set correctly in environment variables')\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n\r\nexport async function fetchTimeEntriesByEmployeeId(employeeId: string) {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('time_entries')\r\n      .select('*')\r\n      .eq('employee_id', employeeId)\r\n      .order('date', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching time entries:', error);\r\n      return [];\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Unexpected error fetching time entries:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\ninterface TimeEntryUpdateFields {\r\n  date?: string;\r\n  hours?: number;\r\n  project_id?: string;\r\n  description?: string;\r\n  approved?: boolean;\r\n}\r\n\r\nexport async function updateTimeEntry(entryId: string, updatedFields: TimeEntryUpdateFields) {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('time_entries')\r\n      .update(updatedFields)\r\n      .eq('id', entryId);\r\n\r\n    if (error) {\r\n      console.error('Error updating time entry:', error);\r\n      return null;\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Unexpected error updating time entry:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Lager-funksjoner\r\n\r\n// Hent lagerdata og returner som et objekt { impregnert_staur: antall, ... }\r\nexport async function fetchLager(): Promise<Record<string, number>> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('lager')\r\n      .select('navn, antall')\r\n\r\n    if (error) {\r\n      console.error('Error fetching lager:', error)\r\n      return {}\r\n    }\r\n    // Map til { key: antall }\r\n    const lagerObj: Record<string, number> = {}\r\n    data?.forEach((row: { navn: string; antall: number }) => {\r\n      const key = row.navn.toLowerCase().replaceAll(' ', '_').replaceAll('å', 'a').replaceAll('æ', 'ae').replaceAll('ø', 'o')\r\n      lagerObj[key] = row.antall\r\n    })\r\n    return lagerObj\r\n  } catch (error) {\r\n    console.error('Unexpected error fetching lager:', error)\r\n    return {}\r\n  }\r\n}\r\n\r\n// Oppdater lagerdata basert på form-objektet { impregnert_staur: antall, ... }\r\nexport async function updateLager(form: Record<string, number>) {\r\n  try {\r\n    // Hent eksisterende rader\r\n    const { data: existing, error: fetchError } = await supabase\r\n      .from('lager')\r\n      .select('id, navn')\r\n    if (fetchError) {\r\n      console.error('Error fetching lager for update:', fetchError)\r\n      return\r\n    }\r\n    // Oppdater eller opprett for hver vare\r\n    for (const [key, antall] of Object.entries(form)) {\r\n      // Finn navn fra key\r\n      const navn = key\r\n        .replaceAll('_', ' ')\r\n        .replaceAll('ae', 'æ')\r\n        .replaceAll('o', 'ø')\r\n        .replaceAll('a', 'å')\r\n      // Søk etter eksisterende rad\r\n      const existingRow = existing?.find((row: { navn: string }) => row.navn.toLowerCase().replaceAll(' ', '_') === key)\r\n      if (existingRow) {\r\n        // Oppdater\r\n        await supabase.from('lager').update({ antall: Number(antall) }).eq('id', existingRow.id)\r\n      } else {\r\n        // Sett inn ny\r\n        await supabase.from('lager').insert([{ navn, antall: Number(antall) }])\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Unexpected error updating lager:', error)\r\n  }\r\n}\r\n\r\n// Hent lagerhistorikk (transaksjoner) med varenavn\r\nexport async function fetchLagerHistorikk(): Promise<Array<{\r\n  created_at: string;\r\n  navn: string;\r\n  type: string;\r\n  antall: number;\r\n  kommentar: string;\r\n}>> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('lager_transactions')\r\n      .select('created_at, type, antall, kommentar, lager_id, lager:lager_id(navn)')\r\n      .order('created_at', { ascending: false })\r\n      .limit(100)\r\n    if (error) {\r\n      console.error('Error fetching lager historikk:', error)\r\n      // Log the full error object for debugging\r\n      if (typeof window !== 'undefined') {\r\n        interface WindowWithError extends Window {\r\n          __supabaseLagerHistorikkError?: unknown;\r\n        }\r\n        (window as WindowWithError).__supabaseLagerHistorikkError = error;\r\n      }\r\n      return []\r\n    }\r\n    // Map til flat struktur med varenavn\r\n    interface LagerTransaction {\r\n      created_at: string\r\n      lager?: Array<{ navn: string }>\r\n      type: string\r\n      antall: number\r\n      kommentar: string | null\r\n    }\r\n\r\n    return (data || []).map((row: LagerTransaction) => ({\r\n      created_at: row.created_at,\r\n      navn: row.lager?.[0]?.navn || '',\r\n      type: row.type,\r\n      antall: row.antall,\r\n      kommentar: row.kommentar || ''\r\n    }))\r\n  } catch (error) {\r\n    console.error('Unexpected error fetching lager historikk:', error)\r\n    return []\r\n  }\r\n}\r\n\r\n// Registrer en lagertransaksjon (inntak/uttak/manuell) og oppdater lagerbeholdning\r\nexport async function registerLagerTransaksjon({ key, type, antall, kommentar }: { key: string, type: 'inntak' | 'uttak' | 'manuell', antall: number, kommentar: string }) {\r\n  try {\r\n    // Finn varenavn fra key\r\n    const navn = key.replaceAll('_', ' ').replaceAll('ae', 'æ').replaceAll('o', 'ø').replaceAll('a', 'å')\r\n    // Hent rad for varen\r\n    let lagerId: number | null = null;\r\n    let nyttAntall: number = 0;\r\n    const { data: lagerRows } = await supabase\r\n      .from('lager')\r\n      .select('id, antall')\r\n      .eq('navn', navn)\r\n      .limit(1)\r\n    if (!lagerRows || lagerRows.length === 0) {\r\n      if (type === 'manuell') {\r\n        // Opprett ny vare hvis manuell\r\n        const { data: insertData, error: insertError } = await supabase\r\n          .from('lager')\r\n          .insert([{ navn, antall: Number(antall) }])\r\n          .select('id')\r\n          .single();\r\n        if (insertError || !insertData) {\r\n          return { error: 'Kunne ikke opprette ny vare' }\r\n        }\r\n        lagerId = insertData.id;\r\n        nyttAntall = Number(antall);\r\n      } else {\r\n        return { error: 'Fant ikke varen i lageret' }\r\n      }\r\n    } else {\r\n      lagerId = lagerRows[0].id;\r\n      nyttAntall = lagerRows[0].antall;\r\n      if (type === 'inntak') {\r\n        nyttAntall += antall;\r\n      } else if (type === 'uttak') {\r\n        if (lagerRows[0].antall < antall) {\r\n          return { error: 'Ikke nok på lager for uttak' }\r\n        }\r\n        nyttAntall -= antall;\r\n      } else if (type === 'manuell') {\r\n        nyttAntall = antall;\r\n      }\r\n      // Oppdater lagerbeholdning for alle typer\r\n      const { error: updateError } = await supabase\r\n        .from('lager')\r\n        .update({ antall: nyttAntall })\r\n        .eq('id', lagerId)\r\n      if (updateError) {\r\n        return { error: 'Kunne ikke oppdatere lagerbeholdning' }\r\n      }\r\n    }\r\n    // Registrer transaksjon ALLTID\r\n    const { error: transError } = await supabase\r\n      .from('lager_transactions')\r\n      .insert({ lager_id: lagerId, type, antall, kommentar })\r\n    if (transError) {\r\n      return { error: 'Kunne ikke registrere transaksjon' }\r\n    }\r\n    return { success: true }\r\n  } catch {\r\n    return { error: 'Uventet feil ved registrering' }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Eidsheim/Kopi%20av%20driftig%2010.04.25/.ssh/driftig/src/services/abonnementService.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase'\r\n\r\nexport interface Abonnement {\r\n  id: string\r\n  etternavn: string\r\n  adresse: string\r\n  kommune: string\r\n  var: string\r\n  host: string\r\n  epost: string\r\n  fornyelsesdato: string\r\n  tak_storrelse?: string\r\n}\r\n\r\nexport interface AbonnementInput {\r\n  fornavn: string\r\n  etternavn: string\r\n  adresse: string\r\n  kommune: string\r\n  var: string\r\n  host: string\r\n  epost: string\r\n  fakturert: boolean\r\n  fornyelsesdato: string\r\n  sum: number\r\n  notat: string\r\n}\r\n\r\nexport interface ScheduledAbonnement {\r\n  id: string\r\n  abonnement_id: number\r\n  scheduled_date: string\r\n  created_at: string\r\n  updated_at: string\r\n  abonnementer?: Abonnement\r\n}\r\n\r\n// Get all abonnements\r\nexport async function getAbonnements() {\r\n  const { data, error } = await supabase\r\n    .from('abonnementer')\r\n    .select('*')\r\n    .order('etternavn', { ascending: true })\r\n\r\n  if (error) {\r\n    console.error('Error fetching abonnements:', error)\r\n    throw error\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\n// Get scheduled abonnements\r\nexport async function getScheduledAbonnements() {\r\n  const { data, error } = await supabase\r\n    .from('scheduled_abonnements')\r\n    .select(`\r\n      *,\r\n      abonnementer:abonnement_id (*)\r\n    `)\r\n    .order('scheduled_date', { ascending: true })\r\n\r\n  if (error) {\r\n    console.error('Error fetching scheduled abonnements:', error)\r\n    throw error\r\n  }\r\n\r\n  return data || []\r\n}\r\n\r\n// Schedule an abonnement\r\nexport async function scheduleAbonnement(abonnementId: string, scheduledDate: string) {\r\n  try {\r\n    // Validate inputs\r\n    const abonnementIdNum = Number(abonnementId)\r\n    if (isNaN(abonnementIdNum)) {\r\n      throw new Error(`Invalid abonnement ID: ${abonnementId}`)\r\n    }\r\n    \r\n    if (!scheduledDate || !Date.parse(scheduledDate)) {\r\n      throw new Error(`Invalid date format: ${scheduledDate}`)\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('scheduled_abonnements')\r\n      .insert([\r\n        {\r\n          abonnement_id: abonnementIdNum,\r\n          scheduled_date: scheduledDate\r\n        }\r\n      ])\r\n      .select()\r\n\r\n    if (error) {\r\n      console.error(`Error scheduling abonnement ${abonnementId} for date ${scheduledDate}:`, {\r\n        message: error.message,\r\n        code: error.code,\r\n        details: error.details,\r\n        hint: error.hint\r\n      })\r\n      throw new Error(`Failed to schedule: ${error.message}`)\r\n    }\r\n\r\n    if (!data || data.length === 0) {\r\n      throw new Error('No data returned from scheduling operation')\r\n    }\r\n\r\n    return data[0]\r\n  } catch (error) {\r\n    console.error(`Failed to schedule abonnement ${abonnementId}:`, {\r\n      error: error instanceof Error ? error.message : error,\r\n      stack: error instanceof Error ? error.stack : undefined\r\n    })\r\n    throw new Error(`Failed to schedule abonnement: ${error instanceof Error ? error.message : 'Unknown error'}`)\r\n  }\r\n}\r\n\r\n// Unschedule an abonnement\r\nexport async function unscheduleAbonnement(id: string) {\r\n  const { error } = await supabase\r\n    .from('scheduled_abonnements')\r\n    .delete()\r\n    .eq('id', id)\r\n\r\n  if (error) {\r\n    console.error(`Error unscheduling abonnement with id ${id}:`, error)\r\n    throw error\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n// Unschedule an abonnement by abonnement ID and date\r\nexport async function unscheduleAbonnementByIdAndDate(abonnementId: string, scheduledDate: string) {\r\n  const { error } = await supabase\r\n    .from('scheduled_abonnements')\r\n    .delete()\r\n    .eq('abonnement_id', abonnementId)\r\n    .eq('scheduled_date', scheduledDate)\r\n\r\n  if (error) {\r\n    console.error(`Error unscheduling abonnement ${abonnementId} for date ${scheduledDate}:`, error)\r\n    throw error\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n// Process multiple abonnements from import\r\nexport async function processAbonnements(abonnements: AbonnementInput[]) {\r\n  const results = []\r\n  \r\n  for (const abonnement of abonnements) {\r\n    try {\r\n      const result = await createAbonnement(abonnement)\r\n      results.push(result)\r\n    } catch (error) {\r\n      console.error(`Failed to create abonnement for ${abonnement.fornavn} ${abonnement.etternavn}:`, error)\r\n      throw error\r\n    }\r\n  }\r\n  \r\n  return results\r\n}\r\n\r\n// Create a new abonnement\r\nexport async function createAbonnement(abonnement: AbonnementInput) {\r\n  const { data, error } = await supabase\r\n    .from('abonnementer')\r\n    .insert([\r\n      {\r\n        fornavn: abonnement.fornavn,\r\n        etternavn: abonnement.etternavn,\r\n        adresse: abonnement.adresse,\r\n        kommune: abonnement.kommune,\r\n        var: abonnement.var,\r\n        host: abonnement.host,\r\n        epost: abonnement.epost,\r\n        fakturert: abonnement.fakturert,\r\n        fornyelsesdato: abonnement.fornyelsesdato,\r\n        sum: abonnement.sum,\r\n        notat: abonnement.notat\r\n      }\r\n    ])\r\n    .select()\r\n\r\n  if (error) {\r\n    console.error('Error creating abonnement:', error)\r\n    throw error\r\n  }\r\n\r\n  return data?.[0]\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Eidsheim/Kopi%20av%20driftig%2010.04.25/.ssh/driftig/src/components/AbonnementImport.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { toast } from 'react-hot-toast'\r\nimport * as ExcelJS from 'exceljs'\r\nimport { processAbonnements } from '@/services/abonnementService'\r\nimport { ExcelRow } from '@/types/excel'\r\n\r\ninterface AbonnementData {\r\n  fornavn: string\r\n  etternavn: string\r\n  adresse: string\r\n  kommune: string\r\n  var_utfort: boolean\r\n  host_utfort: boolean\r\n  epost: string\r\n  fakturert: boolean\r\n  fornyelsesdato: string\r\n  sum: number\r\n  notat: string\r\n}\r\n\r\ninterface AbonnementImportProps {\r\n  onImportSuccess?: () => void;\r\n}\r\n\r\nexport default function AbonnementImport({ onImportSuccess }: AbonnementImportProps) {\r\n  const [isUploading, setIsUploading] = useState(false)\r\n  const [progress, setProgress] = useState(0)\r\n  const [totalRows, setTotalRows] = useState(0)\r\n  const [processedRows, setProcessedRows] = useState(0)\r\n  const [showImport, setShowImport] = useState(false)\r\n\r\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    setIsUploading(true)\r\n    setProgress(0)\r\n    setProcessedRows(0)\r\n    \r\n    try {\r\n      const data = await readExcelFile(file)\r\n      if (data.length === 0) {\r\n        toast.error('Ingen data funnet i filen')\r\n        setIsUploading(false)\r\n        return\r\n      }\r\n      \r\n      setTotalRows(data.length)\r\n      // Convert to AbonnementInput format expected by the service\r\n      const inputData = data.map(item => ({\r\n        fornavn: item.fornavn,\r\n        etternavn: item.etternavn,\r\n        adresse: item.adresse,\r\n        kommune: item.kommune,\r\n        var: item.var_utfort ? 'Ja' : 'Nei',\r\n        host: item.host_utfort ? 'Ja' : 'Nei',\r\n        epost: item.epost,\r\n        fakturert: item.fakturert,\r\n        fornyelsesdato: item.fornyelsesdato,\r\n        sum: item.sum,\r\n        notat: item.notat\r\n      }))\r\n      \r\n      await processAbonnements(inputData)\r\n      \r\n      toast.success(`${data.length} abonnementer importert`)\r\n      e.target.value = ''\r\n      onImportSuccess?.()\r\n    } catch (error) {\r\n      console.error('Error importing abonnements:', error)\r\n      toast.error('Kunne ikke importere abonnementer')\r\n    } finally {\r\n      setIsUploading(false)\r\n    }\r\n  }\r\n\r\n  const convertExcelValue = (value: unknown): string | number | boolean => {\r\n    if (value === null || value === undefined) return ''\r\n    if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\r\n      return value\r\n    }\r\n    if (value instanceof Date) {\r\n      return value.toISOString().split('T')[0]\r\n    }\r\n    if (typeof value === 'object' && 'result' in value) {\r\n      return value.result?.toString() || ''\r\n    }\r\n    return value?.toString() || ''\r\n  }\r\n\r\n  const readExcelFile = async (file: File): Promise<AbonnementData[]> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader()\r\n      \r\n      reader.onload = async (e) => {\r\n        try {\r\n          const data = e.target?.result as ArrayBuffer\r\n          const workbook = new ExcelJS.Workbook()\r\n          await workbook.xlsx.load(data)\r\n          const worksheet = workbook.worksheets[0]\r\n          \r\n          // Convert Excel data to JSON\r\n          const jsonData = worksheet.getSheetValues()\r\n            .filter((row, i) => i > 1 && row) // Skip header and empty rows\r\n            .map(row => {\r\n              const obj: Partial<ExcelRow> = {}\r\n              worksheet.getRow(1).eachCell((cell, colNumber) => {\r\n                if (cell.text && row && Array.isArray(row)) {\r\n                  const value = convertExcelValue(row[colNumber])\r\n                  if (value !== undefined && value !== null) {\r\n                    obj[cell.text as keyof ExcelRow] = value\r\n                  }\r\n                }\r\n              })\r\n              return obj\r\n            })\r\n          \r\n          // Map Excel columns to our data structure\r\n\r\n          const mappedData = jsonData.map((row: unknown) => {\r\n            const excelRow = row as ExcelRow\r\n            return {\r\n              fornavn: String(excelRow.Fornavn ?? ''),\r\n              etternavn: String(excelRow.Etternavn ?? ''),\r\n              adresse: String(excelRow.Adresse ?? ''),\r\n              kommune: String(excelRow.Kommune ?? ''),\r\n              var_utfort: typeof excelRow['Vår utført'] === 'boolean' \r\n                ? excelRow['Vår utført'] \r\n                : String(excelRow['Vår utført'] ?? '').toLowerCase() === 'ja',\r\n              host_utfort: typeof excelRow['Høst utført'] === 'boolean'\r\n                ? excelRow['Høst utført']\r\n                : String(excelRow['Høst utført'] ?? '').toLowerCase() === 'ja',\r\n              epost: String(excelRow['E-post'] ?? ''),\r\n              fakturert: typeof excelRow.Fakturert === 'boolean'\r\n                ? excelRow.Fakturert\r\n                : String(excelRow.Fakturert ?? '').toLowerCase() === 'ja',\r\n              fornyelsesdato: formatDate(excelRow.Fornyelsesdato),\r\n              sum: Number(excelRow.Sum ?? 0),\r\n              notat: String(excelRow.Notat ?? '')\r\n            }\r\n          })\r\n          \r\n          resolve(mappedData)\r\n        } catch (error) {\r\n          reject(error)\r\n        }\r\n      }\r\n      \r\n      reader.onerror = (error) => reject(error)\r\n      reader.readAsBinaryString(file)\r\n    })\r\n  }\r\n\r\n  const formatDate = (date: unknown): string => {\r\n    if (date === undefined || date === null) return ''\r\n    \r\n    // Handle Excel date format (number of days since 1900-01-01)\r\n    if (typeof date === 'number') {\r\n      const excelEpoch = new Date(1900, 0, 1)\r\n      const dateObj = new Date(excelEpoch.getTime() + (date - 1) * 24 * 60 * 60 * 1000)\r\n      return dateObj.toISOString().split('T')[0]\r\n    }\r\n    \r\n    // Handle string date format\r\n    if (typeof date === 'string') {\r\n      // DD.MM.YYYY format\r\n      const parts = date.split('.')\r\n      if (parts.length === 3) {\r\n        return `${parts[2]}-${parts[1].padStart(2, '0')}-${parts[0].padStart(2, '0')}`\r\n      }\r\n      // YYYY-MM-DD format\r\n      if (/^\\d{4}-\\d{2}-\\d{2}$/.test(date)) {\r\n        return date\r\n      }\r\n    }\r\n    \r\n    // Handle Date objects\r\n    if (date instanceof Date) {\r\n      return date.toISOString().split('T')[0]\r\n    }\r\n    \r\n    // Fallback to empty string\r\n    return ''\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-gray-900 rounded-xl border border-gray-800 p-6\">\r\n      <h2 className=\"text-xl font-semibold text-white mb-4\">Importer abonnementer</h2>\r\n      {!showImport ? (\r\n        <button\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          onClick={() => setShowImport(true)}\r\n        >\r\n          Importer kunder fra fil\r\n        </button>\r\n      ) : (\r\n        <>\r\n          <div className=\"mb-6\">\r\n            <p className=\"text-gray-400 mb-2\">\r\n              Last opp en Excel-fil med abonnementer. Filen må inneholde følgende kolonner:\r\n            </p>\r\n            <ul className=\"text-gray-400 text-sm list-disc pl-5 mb-4\">\r\n              <li>Fornavn</li>\r\n              <li>Etternavn</li>\r\n              <li>Adresse</li>\r\n              <li>Kommune</li>\r\n              <li>Vår (sjekkboks)</li>\r\n              <li>Høst (sjekkboks)</li>\r\n              <li>E-post</li>\r\n              <li>Fakturert (sjekkboks)</li>\r\n              <li>Fornyelsesdato</li>\r\n              <li>Sum</li>\r\n              <li>Notat</li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block mb-2 text-sm font-medium text-white\">\r\n              Velg Excel-fil\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\".xlsx, .xls\"\r\n              onChange={handleFileUpload}\r\n              disabled={isUploading}\r\n              className=\"block w-full text-sm text-gray-400 border border-gray-700 rounded-lg cursor-pointer bg-gray-800 focus:outline-none\"\r\n            />\r\n          </div>\r\n          {isUploading && (\r\n            <div className=\"mb-4\">\r\n              <div className=\"flex justify-between mb-1\">\r\n                <span className=\"text-sm font-medium text-white\">Importerer...</span>\r\n                <span className=\"text-sm font-medium text-white\">{progress}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-700 rounded-full h-2.5\">\r\n                <div \r\n                  className=\"bg-blue-600 h-2.5 rounded-full\" \r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n              <p className=\"text-sm text-gray-400 mt-2\">\r\n                {processedRows} av {totalRows} abonnementer importert\r\n              </p>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 738, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Eidsheim/Kopi%20av%20driftig%2010.04.25/.ssh/driftig/src/app/abonnement/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { supabase } from '@/lib/supabase'\r\nimport AbonnementImport from '@/components/AbonnementImport'\r\n\r\ninterface AbonnementData {\r\n  id?: string\r\n  etternavn: string\r\n  adresse: string\r\n  sted: string\r\n  kommune: string\r\n  var: string\r\n  host: string\r\n  epost: string\r\n  fakturert: string\r\n  mail_var: string\r\n  mail_host: string\r\n  tidsbruk_slatt: string\r\n  fornyelsesdato: string\r\n  sum: string\r\n  notat: string\r\n  tak_storrelse?: string\r\n}\r\n\r\ninterface DuplicateWarning {\r\n  customer: AbonnementData\r\n  existingCustomer: AbonnementData\r\n  reason: string\r\n}\r\n\r\ninterface Betaling {\r\n  dato: string\r\n  belop: number\r\n  status: 'betalt' | 'ubetalt' | 'forsinket'\r\n}\r\n\r\ninterface Inspeksjon {\r\n  dato: string\r\n  utfort_av: string\r\n  kommentar: string\r\n  status: 'godkjent' | 'mangler'\r\n}\r\n\r\ninterface Besok {\r\n  dato: string\r\n  ansatt: string\r\n  varighet: string\r\n  kommentar: string\r\n}\r\n\r\ninterface NyKundeForm {\r\n  etternavn: string\r\n  adresse: string\r\n  kommune: string\r\n  fornyelsesdato: string\r\n  tak_storrelse: string\r\n}\r\n\r\nexport default function Abonnement() {\r\n  const [abonnementer, setAbonnementer] = useState<AbonnementData[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [visNyKundeSkjema, setVisNyKundeSkjema] = useState(false)\r\n  const [nyKunde, setNyKunde] = useState<NyKundeForm>({\r\n    etternavn: '',\r\n    adresse: '',\r\n    kommune: '',\r\n    fornyelsesdato: '',\r\n    tak_storrelse: ''\r\n  })\r\n  const [submitStatus, setSubmitStatus] = useState<string>('')\r\n  \r\n  // Customer detail view state\r\n  const [selectedCustomer, setSelectedCustomer] = useState<AbonnementData | null>(null)\r\n  const [activeTab, setActiveTab] = useState<'betalinger' | 'inspeksjoner' | 'besok' | 'kontakt'>('kontakt')\r\n  const [editMode, setEditMode] = useState(false)\r\n  const [editedCustomer, setEditedCustomer] = useState<AbonnementData | null>(null)\r\n  \r\n  // Multi-select and delete state\r\n  const [selectedCustomers, setSelectedCustomers] = useState<string[]>([])\r\n  const [bulkDeleteMode, setBulkDeleteMode] = useState(false)\r\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false)\r\n  \r\n  // Duplicate verification state\r\n  const [duplicateWarnings] = useState<DuplicateWarning[]>([])\r\n  const [showDuplicateWarnings, setShowDuplicateWarnings] = useState(false)\r\n  \r\n  // Mock data for customer details\r\n  const [mockBetalinger] = useState<Betaling[]>([\r\n    { dato: '2025-01-15', belop: 2500, status: 'betalt' },\r\n    { dato: '2024-07-20', belop: 2500, status: 'betalt' },\r\n    { dato: '2024-01-15', belop: 2300, status: 'betalt' },\r\n    { dato: '2023-07-20', belop: 2300, status: 'betalt' }\r\n  ])\r\n  \r\n  const [mockInspeksjoner] = useState<Inspeksjon[]>([\r\n    { dato: '2025-03-10', utfort_av: 'Ole Hansen', kommentar: 'Alt ser bra ut', status: 'godkjent' },\r\n    { dato: '2024-09-05', utfort_av: 'Kari Olsen', kommentar: 'Noen områder trenger ekstra vedlikehold', status: 'mangler' },\r\n    { dato: '2024-03-12', utfort_av: 'Ole Hansen', kommentar: 'Fikset mangler fra forrige inspeksjon', status: 'godkjent' },\r\n    { dato: '2023-09-08', utfort_av: 'Kari Olsen', kommentar: 'Alt ser bra ut', status: 'godkjent' }\r\n  ])\r\n  \r\n  const [mockBesok] = useState<Besok[]>([\r\n    { dato: '2025-03-10', ansatt: 'Ole Hansen', varighet: '2 timer', kommentar: 'Vanlig vedlikehold' },\r\n    { dato: '2024-09-05', ansatt: 'Kari Olsen', varighet: '3 timer', kommentar: 'Ekstra arbeid på nordside' },\r\n    { dato: '2024-03-12', ansatt: 'Ole Hansen', varighet: '2 timer', kommentar: 'Vanlig vedlikehold' },\r\n    { dato: '2023-09-08', ansatt: 'Kari Olsen', varighet: '2 timer', kommentar: 'Vanlig vedlikehold' }\r\n  ])\r\n\r\n  useEffect(() => {\r\n    fetchAbonnementer()\r\n  }, [])\r\n\r\n  async function fetchAbonnementer(searchTerm?: string) {\r\n    try {\r\n      console.log('Henter abonnementer...')\r\n      let query = supabase\r\n        .from('abonnementer')\r\n        .select('*')\r\n\r\n      if (searchTerm) {\r\n        query = query.or(\r\n          `etternavn.ilike.%${searchTerm}%,adresse.ilike.%${searchTerm}%,kommune.ilike.%${searchTerm}%`\r\n        )\r\n      }\r\n\r\n      const { data, error } = await query\r\n      \r\n      if (error) {\r\n        console.error('Supabase error:', error)\r\n        throw error\r\n      }\r\n      \r\n      console.log('Mottatt data:', data)\r\n      setAbonnementer(data || [])\r\n    } catch (error) {\r\n      console.error('Fetch error:', error)\r\n      setError('Kunne ikke hente abonnementer')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target\r\n    setNyKunde(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }))\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    try {\r\n      setSubmitStatus('Lagrer ny kunde...')\r\n      \r\n      // Prepare data for insertion\r\n      const nyKundeData = {\r\n        etternavn: nyKunde.etternavn,\r\n        adresse: nyKunde.adresse,\r\n        kommune: nyKunde.kommune,\r\n        fornyelsesdato: nyKunde.fornyelsesdato,\r\n        tak_storrelse: nyKunde.tak_storrelse,\r\n        // Set default values for required fields\r\n        sted: '',\r\n        var: '',\r\n        host: '',\r\n        epost: '',\r\n        fakturert: '',\r\n        mail_var: '',\r\n        mail_host: '',\r\n        tidsbruk_slatt: '',\r\n        sum: '',\r\n        notat: ''\r\n      }\r\n      \r\n      const { error } = await supabase\r\n        .from('abonnementer')\r\n        .insert([nyKundeData])\r\n      \r\n      if (error) {\r\n        console.error('Supabase insert error:', error)\r\n        throw error\r\n      }\r\n      \r\n      // Reset form and refresh data\r\n      setNyKunde({\r\n        etternavn: '',\r\n        adresse: '',\r\n        kommune: '',\r\n        fornyelsesdato: '',\r\n        tak_storrelse: ''\r\n      })\r\n      setSubmitStatus('Kunde lagt til!')\r\n      setVisNyKundeSkjema(false)\r\n      fetchAbonnementer()\r\n      \r\n      // Clear status message after 3 seconds\r\n      setTimeout(() => {\r\n        setSubmitStatus('')\r\n      }, 3000)\r\n      \r\n    } catch (error) {\r\n      console.error('Submit error:', error)\r\n      setSubmitStatus('Kunne ikke lagre ny kunde')\r\n    }\r\n  }\r\n\r\n\r\n  if (loading) return (\r\n    <div className=\"text-center text-white\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto\"></div>\r\n      <p className=\"mt-4\">Laster abonnementer...</p>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"text-center mb-12\">\r\n        <h1 className=\"text-4xl font-bold text-white mb-4\">Vedlikeholdsabonnementer</h1>\r\n        <p className=\"text-gray-400\">Administrer torvtak vedlikeholdsabonnementer</p>\r\n      </div>\r\n\r\n      {/* Import seksjon */}\r\n      <div className=\"mb-8\">\r\n        <AbonnementImport onImportSuccess={fetchAbonnementer} />\r\n      </div>\r\n\r\n      {/* Abonnementsliste */}\r\n      <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h2 className=\"text-xl font-semibold text-white\">\r\n            {error ? 'Feil ved lasting av abonnementer' : 'Abonnementer'}\r\n          </h2>\r\n          <div className=\"relative w-64\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Søk i kunder...\"\r\n              className=\"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              onChange={(e) => {\r\n                const searchTerm = e.target.value.toLowerCase()\r\n                fetchAbonnementer(searchTerm)\r\n              }}\r\n            />\r\n            <svg\r\n              className=\"absolute right-3 top-2.5 h-5 w-5 text-gray-400\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <div className=\"flex space-x-2\">\r\n            {bulkDeleteMode ? (\r\n              <>\r\n                <button \r\n                  className={`px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center ${selectedCustomers.length === 0 ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                  onClick={() => {\r\n                    if (selectedCustomers.length > 0) {\r\n                      setDeleteConfirmOpen(true)\r\n                    }\r\n                  }}\r\n                  disabled={selectedCustomers.length === 0}\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                  </svg>\r\n                  Slett ({selectedCustomers.length})\r\n                </button>\r\n                <button \r\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n                  onClick={() => {\r\n                    setBulkDeleteMode(false)\r\n                    setSelectedCustomers([])\r\n                  }}\r\n                >\r\n                  Avbryt\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button \r\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center\"\r\n                  onClick={() => setBulkDeleteMode(true)}\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                  </svg>\r\n                  Slett kunder\r\n                </button>\r\n                <button \r\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center\"\r\n                  onClick={() => setVisNyKundeSkjema(true)}\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n                  </svg>\r\n                  Legg til ny kunde\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {error ? (\r\n          <p className=\"text-red-500\">{error}</p>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr className=\"text-left text-gray-400 border-b border-gray-700\">\r\n                  {bulkDeleteMode && (\r\n                    <th className=\"pb-3 w-10\">\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        className=\"w-4 h-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500\"\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            // Select all\r\n                            setSelectedCustomers(abonnementer.filter(a => a.id).map(a => a.id as string))\r\n                          } else {\r\n                            // Deselect all\r\n                            setSelectedCustomers([])\r\n                          }\r\n                        }}\r\n                        checked={selectedCustomers.length === abonnementer.filter(a => a.id).length && abonnementer.length > 0}\r\n                      />\r\n                    </th>\r\n                  )}\r\n                  <th className=\"pb-3\">Navn</th>\r\n                  <th className=\"pb-3\">Adresse</th>\r\n                  <th className=\"pb-3\">Kommune</th>\r\n                  <th className=\"pb-3\">Vår</th>\r\n                  <th className=\"pb-3\">Høst</th>\r\n                  <th className=\"pb-3\">Fornyelsesdato</th>\r\n                  <th className=\"pb-3\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {abonnementer.map((abonnement, index) => (\r\n                  <tr \r\n                    key={index} \r\n                    className=\"border-b border-gray-700 text-gray-300 hover:bg-gray-700 cursor-pointer transition-colors\"\r\n                    onClick={(e) => {\r\n                      if (bulkDeleteMode) {\r\n                        // Don't open customer detail in bulk delete mode unless clicking checkbox\r\n                        const target = e.target as HTMLElement\r\n                        if (target.tagName !== 'INPUT') {\r\n                          e.preventDefault()\r\n                          // Toggle selection\r\n                          if (abonnement.id) {\r\n                            if (selectedCustomers.includes(abonnement.id)) {\r\n                              setSelectedCustomers(prev => prev.filter(id => id !== abonnement.id))\r\n                            } else {\r\n                              setSelectedCustomers(prev => [...prev, abonnement.id as string])\r\n                            }\r\n                          }\r\n                        }\r\n                      } else {\r\n                        setSelectedCustomer(abonnement)\r\n                      }\r\n                    }}\r\n                  >\r\n                    {bulkDeleteMode && (\r\n                      <td className=\"py-3 pl-3\">\r\n                        <input \r\n                          type=\"checkbox\" \r\n                          className=\"w-4 h-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500\"\r\n                          checked={abonnement.id ? selectedCustomers.includes(abonnement.id) : false}\r\n                          onChange={(e) => {\r\n                            if (abonnement.id) {\r\n                              if (e.target.checked) {\r\n                                setSelectedCustomers(prev => [...prev, abonnement.id as string])\r\n                              } else {\r\n                                setSelectedCustomers(prev => prev.filter(id => id !== abonnement.id))\r\n                              }\r\n                            }\r\n                          }}\r\n                          onClick={(e) => e.stopPropagation()}\r\n                        />\r\n                      </td>\r\n                    )}\r\n                    <td className=\"py-3\">{abonnement.etternavn}</td>\r\n                    <td className=\"py-3\">{abonnement.adresse}</td>\r\n                    <td className=\"py-3\">{abonnement.kommune || '-'}</td>\r\n                    <td className=\"py-3\">{abonnement.var}</td>\r\n                    <td className=\"py-3\">{abonnement.host}</td>\r\n                    <td className=\"py-3\">{abonnement.fornyelsesdato}</td>\r\n                    <td className=\"py-3\">\r\n                      <span className=\"px-2 py-1 text-xs rounded-full bg-green-900/20 text-green-400\">\r\n                        Aktiv\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Customer detail modal */}\r\n      {selectedCustomer && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h3 className=\"text-xl font-semibold text-white\">{selectedCustomer.etternavn}</h3>\r\n              <button \r\n                onClick={() => setSelectedCustomer(null)}\r\n                className=\"text-gray-400 hover:text-white\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Tabs */}\r\n            <div className=\"flex border-b border-gray-700 mb-6\">\r\n              <button\r\n                className={`px-4 py-2 font-medium ${activeTab === 'betalinger' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400 hover:text-gray-300'}`}\r\n                onClick={() => setActiveTab('betalinger')}\r\n              >\r\n                Betalinger\r\n              </button>\r\n              <button\r\n                className={`px-4 py-2 font-medium ${activeTab === 'inspeksjoner' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400 hover:text-gray-300'}`}\r\n                onClick={() => setActiveTab('inspeksjoner')}\r\n              >\r\n                Inspeksjoner\r\n              </button>\r\n              <button\r\n                className={`px-4 py-2 font-medium ${activeTab === 'besok' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400 hover:text-gray-300'}`}\r\n                onClick={() => setActiveTab('besok')}\r\n              >\r\n                Besøk\r\n              </button>\r\n              <button\r\n                className={`px-4 py-2 font-medium ${activeTab === 'kontakt' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-gray-400 hover:text-gray-300'}`}\r\n                onClick={() => setActiveTab('kontakt')}\r\n              >\r\n                Kontaktinfo\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Tab content */}\r\n            <div>\r\n              {/* Betalinger tab */}\r\n              {activeTab === 'betalinger' && (\r\n                <div>\r\n                  <div className=\"flex justify-between items-center mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-white\">Betalingshistorikk</h4>\r\n                    <button className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm\">\r\n                      Registrer ny betaling\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead>\r\n                        <tr className=\"text-left text-gray-400 border-b border-gray-700\">\r\n                          <th className=\"pb-2\">Dato</th>\r\n                          <th className=\"pb-2\">Beløp</th>\r\n                          <th className=\"pb-2\">Status</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {mockBetalinger.map((betaling, index) => (\r\n                          <tr key={index} className=\"border-b border-gray-700 text-gray-300\">\r\n                            <td className=\"py-3\">{betaling.dato}</td>\r\n                            <td className=\"py-3\">{betaling.belop} kr</td>\r\n                            <td className=\"py-3\">\r\n                              <span className={`px-2 py-1 text-xs rounded-full ${\r\n                                betaling.status === 'betalt' \r\n                                  ? 'bg-green-900/20 text-green-400' \r\n                                  : betaling.status === 'ubetalt' \r\n                                    ? 'bg-yellow-900/20 text-yellow-400'\r\n                                    : 'bg-red-900/20 text-red-400'\r\n                              }`}>\r\n                                {betaling.status === 'betalt' ? 'Betalt' : betaling.status === 'ubetalt' ? 'Ubetalt' : 'Forsinket'}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Inspeksjoner tab */}\r\n              {activeTab === 'inspeksjoner' && (\r\n                <div>\r\n                  <div className=\"flex justify-between items-center mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-white\">Inspeksjonshistorikk</h4>\r\n                    <button className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm\">\r\n                      Registrer ny inspeksjon\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead>\r\n                        <tr className=\"text-left text-gray-400 border-b border-gray-700\">\r\n                          <th className=\"pb-2\">Dato</th>\r\n                          <th className=\"pb-2\">Utført av</th>\r\n                          <th className=\"pb-2\">Kommentar</th>\r\n                          <th className=\"pb-2\">Status</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {mockInspeksjoner.map((inspeksjon, index) => (\r\n                          <tr key={index} className=\"border-b border-gray-700 text-gray-300\">\r\n                            <td className=\"py-3\">{inspeksjon.dato}</td>\r\n                            <td className=\"py-3\">{inspeksjon.utfort_av}</td>\r\n                            <td className=\"py-3\">{inspeksjon.kommentar}</td>\r\n                            <td className=\"py-3\">\r\n                              <span className={`px-2 py-1 text-xs rounded-full ${\r\n                                inspeksjon.status === 'godkjent' \r\n                                  ? 'bg-green-900/20 text-green-400' \r\n                                  : 'bg-yellow-900/20 text-yellow-400'\r\n                              }`}>\r\n                                {inspeksjon.status === 'godkjent' ? 'Godkjent' : 'Mangler'}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Besøk tab */}\r\n              {activeTab === 'besok' && (\r\n                <div>\r\n                  <div className=\"flex justify-between items-center mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-white\">Besøkshistorikk</h4>\r\n                    <button className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm\">\r\n                      Registrer nytt besøk\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead>\r\n                        <tr className=\"text-left text-gray-400 border-b border-gray-700\">\r\n                          <th className=\"pb-2\">Dato</th>\r\n                          <th className=\"pb-2\">Ansatt</th>\r\n                          <th className=\"pb-2\">Varighet</th>\r\n                          <th className=\"pb-2\">Kommentar</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {mockBesok.map((besok, index) => (\r\n                          <tr key={index} className=\"border-b border-gray-700 text-gray-300\">\r\n                            <td className=\"py-3\">{besok.dato}</td>\r\n                            <td className=\"py-3\">{besok.ansatt}</td>\r\n                            <td className=\"py-3\">{besok.varighet}</td>\r\n                            <td className=\"py-3\">{besok.kommentar}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Kontaktinfo tab */}\r\n              {activeTab === 'kontakt' && (\r\n                <div>\r\n                  <div className=\"flex justify-between items-center mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-white\">Kontaktinformasjon</h4>\r\n                    {!editMode ? (\r\n                      <button \r\n                        className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm\"\r\n                        onClick={() => {\r\n                          setEditMode(true)\r\n                          setEditedCustomer(selectedCustomer)\r\n                        }}\r\n                      >\r\n                        Rediger\r\n                      </button>\r\n                    ) : (\r\n                      <div className=\"flex space-x-2\">\r\n                        <button \r\n                          className=\"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm\"\r\n                          onClick={() => {\r\n                            setEditMode(false)\r\n                            setEditedCustomer(null)\r\n                          }}\r\n                        >\r\n                          Avbryt\r\n                        </button>\r\n                        <button \r\n                          className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\"\r\n                          onClick={async () => {\r\n                            if (!editedCustomer) return;\r\n                            \r\n                            try {\r\n                              const { error } = await supabase\r\n                                .from('abonnementer')\r\n                                .update({\r\n                                  etternavn: editedCustomer.etternavn,\r\n                                  adresse: editedCustomer.adresse,\r\n                                  kommune: editedCustomer.kommune,\r\n                                  epost: editedCustomer.epost,\r\n                                  fornyelsesdato: editedCustomer.fornyelsesdato,\r\n                                  tak_storrelse: editedCustomer.tak_storrelse,\r\n                                  notat: editedCustomer.notat\r\n                                })\r\n                                .eq('id', editedCustomer.id)\r\n                              \r\n                              if (error) {\r\n                                console.error('Update error:', error)\r\n                                throw error\r\n                              }\r\n                              \r\n                              // Update the selected customer with the edited values\r\n                              setSelectedCustomer(editedCustomer)\r\n                              setEditMode(false)\r\n                              \r\n                              // Refresh the subscription list\r\n                              fetchAbonnementer()\r\n                            } catch (error) {\r\n                              console.error('Update error:', error)\r\n                              // Show error message\r\n                            }\r\n                          }}\r\n                        >\r\n                          Lagre\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {!editMode ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Navn</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.etternavn}</p>\r\n                      </div>\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Adresse</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.adresse}</p>\r\n                      </div>\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Kommune</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.kommune || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">E-post</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.epost || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Fornyelsesdato</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.fornyelsesdato || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Takstørrelse</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.tak_storrelse || '-'}</p>\r\n                      </div>\r\n                      <div className=\"md:col-span-2\">\r\n                        <h5 className=\"text-sm font-medium text-gray-400 mb-1\">Notat</h5>\r\n                        <p className=\"text-white\">{selectedCustomer.notat || '-'}</p>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <label htmlFor=\"edit-etternavn\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Navn\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          id=\"edit-etternavn\"\r\n                          value={editedCustomer?.etternavn || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                etternavn: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-adresse\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Adresse\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          id=\"edit-adresse\"\r\n                          value={editedCustomer?.adresse || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                adresse: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-kommune\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Kommune\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          id=\"edit-kommune\"\r\n                          value={editedCustomer?.kommune || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                kommune: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-epost\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          E-post\r\n                        </label>\r\n                        <input\r\n                          type=\"email\"\r\n                          id=\"edit-epost\"\r\n                          value={editedCustomer?.epost || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                epost: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-fornyelsesdato\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Fornyelsesdato\r\n                        </label>\r\n                        <input\r\n                          type=\"date\"\r\n                          id=\"edit-fornyelsesdato\"\r\n                          value={editedCustomer?.fornyelsesdato || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                fornyelsesdato: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-tak_storrelse\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Takstørrelse\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          id=\"edit-tak_storrelse\"\r\n                          value={editedCustomer?.tak_storrelse || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                tak_storrelse: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                          placeholder=\"f.eks. 120 m²\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"edit-notat\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                          Notat\r\n                        </label>\r\n                        <textarea\r\n                          id=\"edit-notat\"\r\n                          value={editedCustomer?.notat || ''}\r\n                          onChange={(e) => {\r\n                            if (editedCustomer) {\r\n                              setEditedCustomer({\r\n                                ...editedCustomer,\r\n                                notat: e.target.value\r\n                              })\r\n                            }\r\n                          }}\r\n                          rows={3}\r\n                          className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Delete confirmation modal */}\r\n      {deleteConfirmOpen && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h3 className=\"text-xl font-semibold text-white\">Bekreft sletting</h3>\r\n              <button \r\n                onClick={() => setDeleteConfirmOpen(false)}\r\n                className=\"text-gray-400 hover:text-white\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-6\">\r\n              <p className=\"text-white mb-2\">Er du sikker på at du vil slette {selectedCustomers.length} kunde{selectedCustomers.length !== 1 ? 'r' : ''}?</p>\r\n              <p className=\"text-gray-400 text-sm\">Dette kan ikke angres.</p>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setDeleteConfirmOpen(false)}\r\n                className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                Avbryt\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={async () => {\r\n                  try {\r\n                    const { error } = await supabase\r\n                      .from('abonnementer')\r\n                      .delete()\r\n                      .in('id', selectedCustomers)\r\n                    \r\n                    if (error) {\r\n                      console.error('Delete error:', error)\r\n                      throw error\r\n                    }\r\n                    \r\n                    // Reset state and refresh data\r\n                    setDeleteConfirmOpen(false)\r\n                    setBulkDeleteMode(false)\r\n                    setSelectedCustomers([])\r\n                    fetchAbonnementer()\r\n                  } catch (error) {\r\n                    console.error('Delete error:', error)\r\n                    // Show error message\r\n                  }\r\n                }}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n              >\r\n                Slett\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Duplicate warnings modal */}\r\n      {showDuplicateWarnings && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700 w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h3 className=\"text-xl font-semibold text-white\">Potensielle duplikater funnet</h3>\r\n              <button \r\n                onClick={() => setShowDuplicateWarnings(false)}\r\n                className=\"text-gray-400 hover:text-white\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-6\">\r\n              <p className=\"text-white mb-2\">\r\n                Følgende kunder i importfilen kan være duplikater av eksisterende kunder:\r\n              </p>\r\n              <p className=\"text-gray-400 text-sm mb-4\">\r\n                Vennligst gjennomgå listen og bekreft om du vil fortsette med importen.\r\n              </p>\r\n              \r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"text-left text-gray-400 border-b border-gray-700\">\r\n                      <th className=\"pb-3\">Ny kunde</th>\r\n                      <th className=\"pb-3\">Eksisterende kunde</th>\r\n                      <th className=\"pb-3\">Årsak</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {duplicateWarnings.map((warning, index) => (\r\n                      <tr key={index} className=\"border-b border-gray-700 text-gray-300\">\r\n                        <td className=\"py-3\">\r\n                          <div className=\"font-medium\">{warning.customer.etternavn}</div>\r\n                          <div className=\"text-sm text-gray-400\">{warning.customer.adresse}</div>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <div className=\"font-medium\">{warning.existingCustomer.etternavn}</div>\r\n                          <div className=\"text-sm text-gray-400\">{warning.existingCustomer.adresse}</div>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <span className=\"px-2 py-1 text-xs rounded-full bg-yellow-900/20 text-yellow-400\">\r\n                            {warning.reason}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowDuplicateWarnings(false)\r\n                  console.log('Import avbrutt')\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                Avbryt import\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={async () => {\r\n                  try {\r\n                    // Extract just the customer data from the warnings\r\n                    const customersToImport = duplicateWarnings.map(warning => warning.customer)\r\n                    \r\n                    const { error } = await supabase\r\n                      .from('abonnementer')\r\n                      .insert(customersToImport)\r\n\r\n                    if (error) {\r\n                      console.error('Supabase insert error:', error)\r\n                      console.error(`Import feilet: ${error.message || 'Ukjent feil'}`)\r\n                      return\r\n                    }\r\n                    \r\n                  console.log(`Import fullført! ${customersToImport.length} abonnementer lagt til.`)\r\n                    setShowDuplicateWarnings(false)\r\n                    // Refresh the subscription list\r\n                    fetchAbonnementer()\r\n                  } catch (error) {\r\n                    console.error('Import error:', error)\r\n                    console.error('Import feilet: Kunne ikke legge til abonnementer')\r\n                  }\r\n                }}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                Fortsett import likevel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Modal for å legge til ny kunde */}\r\n      {visNyKundeSkjema && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h3 className=\"text-xl font-semibold text-white\">Legg til ny kunde</h3>\r\n              <button \r\n                onClick={() => setVisNyKundeSkjema(false)}\r\n                className=\"text-gray-400 hover:text-white\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label htmlFor=\"etternavn\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                    Navn\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"etternavn\"\r\n                    name=\"etternavn\"\r\n                    value={nyKunde.etternavn}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"adresse\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                    Adresse\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"adresse\"\r\n                    name=\"adresse\"\r\n                    value={nyKunde.adresse}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"kommune\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                    Kommune\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"kommune\"\r\n                    name=\"kommune\"\r\n                    value={nyKunde.kommune}\r\n                    onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"fornyelsesdato\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                    Fornyelsesdato\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"fornyelsesdato\"\r\n                    name=\"fornyelsesdato\"\r\n                    value={nyKunde.fornyelsesdato}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"tak_storrelse\" className=\"block text-sm font-medium text-gray-400 mb-1\">\r\n                    Størrelse på tak\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"tak_storrelse\"\r\n                    name=\"tak_storrelse\"\r\n                    value={nyKunde.tak_storrelse}\r\n                    onChange={handleInputChange}\r\n                    required\r\n                    className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"f.eks. 120 m²\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              {submitStatus && (\r\n                <p className={`mt-4 ${submitStatus.includes('ikke') ? 'text-red-500' : 'text-green-500'}`}>\r\n                  {submitStatus}\r\n                </p>\r\n              )}\r\n              \r\n              <div className=\"mt-6 flex justify-end space-x-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setVisNyKundeSkjema(false)}\r\n                  className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\r\n                >\r\n                  Avbryt\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Lagre\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}